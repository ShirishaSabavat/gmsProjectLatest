"use strict";(self.webpackChunkboiler_plate=self.webpackChunkboiler_plate||[]).push([[9259],{59259:function(e,a,t){t.r(a);var i=t(29439),n=t(72791),r=t(54270),o=t(13085),l=t(20098),s=t(73231),d=t(20135),c=t(87309),u=t(70895),m=(t(63521),t(80184));a.default=function(){var e=(0,n.useState)(!0),a=(0,i.Z)(e,2),t=a[0],v=a[1],f=(0,n.useState)([]),h=(0,i.Z)(f,2),x=h[0],g=h[1],p=(0,n.useState)(""),y=(0,i.Z)(p,2),b=(y[0],y[1]),j=(0,n.useState)(""),C=(0,i.Z)(j,2),w=C[0],S=C[1],Z=(0,n.useState)(""),k=(0,i.Z)(Z,2),_=k[0],N=k[1],F=(0,n.useState)(""),q=(0,i.Z)(F,2),I=q[0],O=q[1],T=(0,n.useState)(""),E=(0,i.Z)(T,2),R=E[0],L=E[1],z=(0,n.useState)(""),P=(0,i.Z)(z,2),A=P[0],B=P[1],D=(0,n.useState)(""),J=(0,i.Z)(D,2),M=J[0],V=J[1],H=(0,n.useState)(""),Q=(0,i.Z)(H,2),Y=Q[0],G=Q[1],K=(0,n.useState)(""),W=(0,i.Z)(K,2),$=W[0],U=W[1],X=(0,n.useState)(10),ee=(0,i.Z)(X,2),ae=ee[0],te=ee[1],ie=(0,n.useState)(0),ne=(0,i.Z)(ie,2),re=ne[0],oe=ne[1],le=(0,n.useState)(""),se=(0,i.Z)(le,2),de=se[0],ce=se[1],ue=(0,n.useState)(""),me=(0,i.Z)(ue,2),ve=me[0],fe=me[1],he=(0,n.useState)(""),xe=(0,i.Z)(he,2),ge=xe[0],pe=xe[1],ye=(0,n.useState)(0),be=(0,i.Z)(ye,2),je=be[0],Ce=be[1],we=(0,n.useState)(""),Se=(0,i.Z)(we,2),Ze=Se[0],ke=Se[1],_e=(0,n.useState)(""),Ne=(0,i.Z)(_e,2),Fe=(Ne[0],Ne[1]),qe=(0,n.useState)(""),Ie=(0,i.Z)(qe,2),Oe=Ie[0],Te=Ie[1],Ee=(0,n.useState)([]),Re=(0,i.Z)(Ee,2),Le=Re[0],ze=Re[1],Pe=(0,n.useState)("-1"),Ae=(0,i.Z)(Pe,2),Be=Ae[0],De=Ae[1],Je=(0,n.useState)(1),Me=(0,i.Z)(Je,2),Ve=Me[0],He=Me[1],Qe=function(){v(!0),S(""),N(""),O(""),te(10),oe(0),ce(""),Ce(0),ke(""),Fe(""),Te("")};(0,n.useEffect)((function(){var e=localStorage.getItem("cityid");b(e),(0,u._H)(e).then((function(e){g(null===e||void 0===e?void 0:e.data);var a=localStorage.getItem("garageid"),t=localStorage.getItem("locationid");fe(a),pe(t),"-1"===Be&&te(ae)})).catch((function(e){console.log("err",e)}))}),[]),(0,n.useEffect)((function(){var e=localStorage.getItem("cityid");(0,u.Jb)(e).then((function(e){ze(null===e||void 0===e?void 0:e.data)})).catch((function(e){console.log("err",e)}))}),[]);var Ye=function(e){Qe(),(0,u.bw)(e).then((function(a){if(console.log(a.data.car_status),2===a.data.car_status){oe(e);var t=x.filter((function(a){return a.id===e}));ce(t[0].name),r=e,(0,u.KR)(r).then((function(e){var a,t,i,n,r,l,s;(null===e||void 0===e?void 0:e.data.length)>0?null!==(null===e||void 0===e||null===(a=e.data[0])||void 0===a?void 0:a.team)?(O(null===e||void 0===e||null===(t=e.data[0])||void 0===t||null===(i=t.team)||void 0===i?void 0:i.name),He(null===e||void 0===e||null===(n=e.data[0])||void 0===n||null===(r=n.team)||void 0===r?void 0:r.revenue_type),ke(null===e||void 0===e||null===(l=e.data[0])||void 0===l||null===(s=l.team)||void 0===s?void 0:s.id)):o.Z.error({message:"No Team Allocated",duration:0}):(S(""),N(""),O(""),Ce(0),ke(""))})).catch((function(e){console.log("err",e)}))}else if(0===a.data.car_status){(0,u.s3)(e).then((function(e){var a,t,i=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.results[0];Fe(null===i||void 0===i?void 0:i.car_number),v(null===i||void 0===i?void 0:i.is_with_driver),S(null===i||void 0===i?void 0:i.driver_name),N(null===i||void 0===i?void 0:i.drive_contact_number),ke(null===i||void 0===i?void 0:i.driverManagerId),O(null===i||void 0===i?void 0:i.driver_manager_name),te(null===i||void 0===i?void 0:i.visit_category),oe(null===i||void 0===i||null===(t=i.carId)||void 0===t?void 0:t.id),De(null===i||void 0===i?void 0:i.id),Te(null===i||void 0===i?void 0:i.employee_id)})).catch((function(e){console.log("err1",e)}));var i="";1===a.data.visit_category?i="60:40 Jama":2===a.data.visit_category?i="Leasing Jama":3===a.data.visit_category?i="Regular Audit":4===a.data.visit_category?i="Serciving":5===a.data.visit_category?i="Repair":6===a.data.visit_category?i="Breakdown":7===a.data.visit_category?i="Insurance":8===a.data.visit_category&&(i="Car Recovery"),o.Z.info({message:"Car is already in the ".concat(i," Queue, You can modify it"),duration:0})}else{var n="";1===a.data.visit_category?n="60:40 Jama":2===a.data.visit_category?n="Leasing Jama":3===a.data.visit_category?n="Regular Audit":4===a.data.visit_category?n="Serciving":5===a.data.visit_category?n="Repair":6===a.data.visit_category?n="Breakdown":7===a.data.visit_category?n="Insurance":8===a.data.visit_category&&(n="Car Recovery"),o.Z.error({message:"Car is already in the ".concat(n," Completion Queue"),duration:0})}var r})).catch((function(e){console.log(e)}))};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.q,{title:"Teams"}),(0,m.jsxs)("div",{className:"flex flex-col space-y-2 mx-4",children:[(0,m.jsx)("div",{className:"space-y-2 basic-1/2",children:(0,m.jsx)("span",{className:"font-quicksand-semi-bold text-xl mr-3.5",children:"Car Visit"})}),(0,m.jsxs)("div",{className:"bg-white p-4",children:[(0,m.jsxs)("p",{className:"font-quicksand-semi-bold",style:{fontSize:"12px"},children:["Car Number"," ",(0,m.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,m.jsx)("div",{className:"bg-white",children:(0,m.jsx)(l.Z,{onChange:function(e){Ye(e)},style:{width:"100%",backgroundColor:"#F5F8FC"},placeholder:"Search Car",showSearch:!0,optionFilterProp:"children",filterOption:function(e,a){return a.children.toString().toLowerCase().indexOf(e.toLowerCase())>=0},children:x.map((function(e){return(0,m.jsx)(l.Z.Option,{value:e.id,children:e.name},e.id)}))})}),Object.keys($).map((function(e){return(0,m.jsx)("div",{style:{color:"red"},children:$[e]})})),(0,m.jsxs)("div",{className:"bg-white py-5",children:[(0,m.jsx)("p",{className:"font-quicksand-semi-bold",style:{fontSize:"12px"},children:"Is Car with Driver?"}),(0,m.jsx)("div",{className:"flex flex-row flex-nonwrap bg-white",children:(0,m.jsxs)(s.ZP.Group,{onChange:function(e){return v(e.target.value)},value:t,children:[(0,m.jsx)(s.ZP,{style:{color:"#9193A2"},className:"font-quicksand-semi-bold",value:!0,children:"Yes"}),(0,m.jsx)(s.ZP,{style:{color:"#9193A2"},className:"font-quicksand-semi-bold",value:!1,children:"New Car"})]})})]}),!0===t?(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{className:"font-quicksand-semi-bold",style:{fontSize:"12px"},children:["ETM Id"," ",(0,m.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,m.jsx)(l.Z,{onChange:function(e){!function(e){var a=Le.filter((function(a){return a.id===e}));Te(a[0].employee_id),S(a[0].name)}(e)},style:{width:"100%",backgroundColor:"#F5F8FC",marginBottom:"8px"},placeholder:"Search Employee",value:Oe||void 0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,a){return a.children.toString().toLowerCase().indexOf(e.toLowerCase())>=0},children:Le.map((function(e){return(0,m.jsx)(l.Z.Option,{value:e.id,children:e.employee_id},e.id)}))}),(0,m.jsxs)("p",{className:"font-quicksand-semi-bold",style:{fontSize:"12px"},children:["Driver Name"," ",(0,m.jsx)("span",{style:{color:"red"},children:"*"})," "]}),(0,m.jsx)("div",{className:"flex flex-nonwrap bg-white",children:(0,m.jsx)(d.Z,{value:w,readOnly:!0,style:{padding:"8px",marginBottom:"8px",backgroundColor:"#F5F8FC",borderColor:"#F5F8FC",width:"150%"}})}),Object.keys(R).map((function(e){return(0,m.jsx)("div",{style:{color:"red"},children:R[e]})})),(0,m.jsxs)("p",{className:"font-quicksand-semi-bold",style:{fontSize:"12px"},children:["Contact Number"," ",(0,m.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,m.jsx)("div",{className:"flex flex-nonwrap bg-white",children:(0,m.jsx)(d.Z,{value:_,onChange:function(e){return N(e.target.value)},placeholder:"Enter Contact Here...",style:{padding:"8px",marginBottom:"8px",backgroundColor:"#fff",borderColor:"#74D1D8",width:"150%"}})}),Object.keys(A).map((function(e){return(0,m.jsx)("div",{style:{color:"red"},children:A[e]})}))]}):(0,m.jsx)("div",{}),(0,m.jsxs)("p",{className:"font-quicksand-semi-bold",style:{fontSize:"12px"},children:["Team"," ",(0,m.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,m.jsx)("div",{className:"flex flex-nonwrap bg-white",children:(0,m.jsx)(d.Z,{value:I,readOnly:!0,style:{padding:"8px",marginBottom:"8px",backgroundColor:"#F5F8FC",borderColor:"#F5F8FC",width:"150%"}})}),Object.keys(M).map((function(e){return(0,m.jsx)("div",{style:{color:"red"},children:M[e]})}))]}),(0,m.jsxs)("div",{className:"bg-white p-4",children:[(0,m.jsxs)("p",{className:"font-quicksand-bold text-5xl",style:{fontSize:"12px"},children:["Reason for Visit"," ",(0,m.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,m.jsxs)("div",{className:"flex flex-row flex-nonwrap",children:[(0,m.jsx)(c.Z,{onClick:function(){return te(4)},className:"font-quicksand-medium",style:{marginTop:"10px",marginLeft:"10px",backgroundColor:4===ae?"aqua":"white"},children:"Servicing"}),(0,m.jsx)(c.Z,{onClick:function(){return te(5)},className:"font-quicksand-medium",style:{marginTop:"10px",marginLeft:"10px",backgroundColor:5===ae?"aqua":"white"},children:"Repair"})]}),(0,m.jsxs)("div",{className:"flex flex-row flex-nonwrap",children:[(0,m.jsx)(c.Z,{onClick:function(){return te(3)},className:"font-quicksand-medium",style:{marginTop:"10px",marginLeft:"10px",backgroundColor:3===ae?"aqua":"white"},children:"Regular Audit"}),1===Ve?(0,m.jsx)(c.Z,{onClick:function(){return te(1)},className:"font-quicksand-medium",style:{marginTop:"10px",marginLeft:"10px",backgroundColor:1===ae?"aqua":"white"},children:"Car Jama"}):""]}),(0,m.jsx)("div",{className:"flex flex-row flex-nonwrap",children:2===Ve?(0,m.jsx)(c.Z,{onClick:function(){return te(2)},className:"font-quicksand-medium",style:{marginTop:"10px",marginLeft:"10px",backgroundColor:2===ae?"aqua":"white"},children:"Car Jama"}):""}),Object.keys(Y).map((function(e){return(0,m.jsx)("div",{style:{color:"red"},children:Y[e]})}))]}),(0,m.jsx)("div",{className:"col-12 flex flex-row justify-center",children:(0,m.jsx)(c.Z,{onClick:function(e){if(e.preventDefault(),function(){var e={},a={},i={},n={},r={},o=!0;return-1===re?(""!==de.trim()&&"Enter Car Number Here..."!==de||(a.err="Please Select Car.",o=!1),10===ae&&(n.err="Please select reason for visit",o=!1),U(a),G(n)):(10===ae&&(n.err="Please select reason for visit",o=!1),t&&((_.trim().length<10||_.trim().length>10)&&(r.pinErr="Mobile Number should be of 10 digits only",o=!1),/^[0-9\b]+$/.test(_)||(r.pinErr="Only digits allowed",o=!1),0===_.trim().length&&(r.pinErr="This field can not be empty",o=!1),0===w.trim().length&&(e.pinErr="This field can not be empty",o=!1)),0===I.trim().length&&(i.pinErr="This field can not be empty",o=!1),G(n),B(r),L(e),V(i)),o}())if("-1"===Be){var a=1;3===ae&&(a=7),(0,u.f0)(ae,re,de,ve,t,je,w,_,Ze,I,ge,Oe,a).then((function(e){o.Z.success({message:"Visit Added successfully",duration:0}),Qe(),setTimeout((function(){window.scrollTo(0,0),window.location.reload()}),1e3)})).catch((function(e){o.Z.error({message:e.response.data.message,duration:0})}))}else{var i={visit_category:ae,carId:re,garageId:ve,locationId:ge,is_with_driver:t,driverId:je,driver_name:w,drive_contact_number:_,driverManagerId:Ze,driver_manager_name:I,employee_id:Oe,status:1};(0,u.b4)(Be,i).then((function(e){o.Z.success({message:"Visit Edited successfully",duration:0}),Qe(),oe(0)})).catch((function(e){console.log("err",e)}))}},className:"font-quicksand-medium",style:{marginRight:"20px",borderRadius:"4px",fontWeight:"500",backgroundColor:"#013453",color:"#FFFFFF",fontSize:"16px",height:"52px",boxShadow:"0px 8px 16px #005B923D",textDecoration:"none",padding:"13px 30px"},children:"Submit and add to Queue"})})]})]})}}}]);
//# sourceMappingURL=9259.a085432e.chunk.js.map